= Reading List for Aug 2019
Zed Tan <zed@shootbird.work>
:toc: auto
:toclevels: 3
:sectlinks:
:sectnums:
:source-highlighter: pygments
:assetdir: /aug2019-assets

== China

=== Twitter disclosure re: PRC state-funded campaign

Twitter Safety made a statement disclosing, in their words, that they found a
'state-backed information operation focused on the situation in Hong Kong'.

Statement can be found here: https://blog.twitter.com/en_us/topics/company/2019/information_operations_directed_at_Hong_Kong.html

AFAIK this is the first time they've made a public statement re: state-funded operations from China.
I remember they also made a disclosure re: information operations somewhere in Africa (sorry, I know Africa's
humongous but that's the limit of what I remember).

The disclosure includes a dataset made public re: the Twitter posts and accounts in question,
and a very interesting statement:

[quote]
As Twitter is blocked in PRC, many of these accounts accessed Twitter using VPNs. However, some accounts accessed Twitter from specific unblocked IP addresses originating in mainland China.[…]

The datasets provided are massive CSV files (~800MB each) containing tweets (but presumably leaves out images and videos tweeted).

As a side-note, there's a surprisingly detailed wikipedia page re: the HK anti-extradition bill protests: https://en.wikipedia.org/wiki/2019_Hong_Kong_anti-extradition_bill_protests
link:{assetdir}/2019_Hong_Kong_anti-extradition_bill_protests.pdf[[pdf\]]

== Security

=== SSL things

==== WordPress and Cloudflare

Cloudflare provides a link:https://www.cloudflare.com/integrations/wordpress/[free WordPress plug-in]
that sets up HTTPS on any hosted WordPress site for free.

This is 100% great, given that setting up HTTPS has always been a ordeal for laypersons
working with their hosting providers, which has made them easy prey for SSL providers
who charge for basic TLS encryption. LetsEncrypt has made this free and very much pain-free,
but still requires wrangling that the non-developer (and me) balks at.

So this free plug-in by Cloudflare is fantastic. But, of course, with a few caveats which they make clear in the docs,
but may not be obvious to anyone unfamiliar with TLS.

First, a rudimentary diagram of how Cloudflare's plug-in works:

[source]
----
 ---------           ------------           -----------
| User's  | <-(a)-> | Cloudflare | <-(b)-> | Your      |
| Browser |         | Servers    |         | WordPress |
 ---------           ------------           -----------
----

. When your WordPress instance uses the Cloudflare plug-in,
it allows the plug-in to send your content to Cloudflare's CDN services,
which Cloudflare in turn serves to users.
. Cloudflare provides a secured TLS connection at `(a)`, making sure that traffic to-and-from the user's browser. This is **very important**.
. Traffic at `(b)` is **not automatically secured** by the plug-in. You're going to have to set up SSL on your WordPress server to get that done.

So if you're using the free "Flexible SSL" option available in the WordPress Cloudflare plug-in,
your traffic is only TLS encrypted **between Cloudflare and your users**,
and is still **unsecured** between your WordPress server and Cloudflare.

This is sufficient for most use-cases, but is definitely open to exploitation e.g.
you can correlate traffic on (a) and (b) to figure out who is retrieving what
from your WordPress server, and traffic going _to_ your WordPress server is
in the clear and open to MITM manipulation.

My recommendation is getting that TLS set up on the WordPress server's end as well
by either using link:https://certbot.eff.org[certbot] or just buying a cert off your hosting provider.

==== Automagically start a HTTPS web server in Go

link:https://github.com/mholt/[mholt], the maker of the magical link:https://caddyserver.com[Caddy] web server,
has released an automagical tool for standing up a HTTPS web server: https://github.com/mholt/certmagic

[source, go]
----
package main
// Automagically start a TLS webserver
import (
    //...
    "github.com/mholt/certmagic"
)

func main(){
    mux := http.NewServeMux()
    // mux.HandleFunc...

    // instead of http.ListenAndServe(":80", mux)
    if err := certmagic.HTTPS([]string{"example.com","www.example.com"}, mux); err != nil {
        log.Fatal(err)
    }
}
----

== Computer Science

=== C

Had a job interview go like this:

[source]
----
Me: I haven't done extensive API documentation, but I've worked with devs to
document a C++ API.
Them: Sends an assignment to document a 'classic' C library.
Me: !['huh'](shocked_pikachu.jpg)
----

So I spent a good portion of the week trawling through StackOverflow and
digging through of Kernighan & Ritchie's "The C Programming Language"
to at least understand some of what I was looking at.

Saved some notes for myself and anyone who accidentally finds themselves
inadvertently elbow-deep in a C library for some reason or another:

https://gist.github.com/zeddee/05ed70cff06094974aedcee4e22257fb

=== Pointers

Which brings me to `pointers`.

Have always had a vague understanding of pointers i.e.:

- A pointer is a reference to a memory address where information is stored.

But it's also an understanding that falls apart the moment I try to work with anything more complex than
having to make sure that I'm mutating the same block of data across multiple functions/method calls.

So having to grok a low-level language like link:#C[C] forced me to reckon with pointers again.

More detailed notes are found in https://gist.github.com/zeddee/05ed70cff06094974aedcee4e22257fb#pointer-operations (the same Gist as above),
but here are a few brief points I've gleaned from grappling with pointers (for reference and to clarify the thoughts floating in my head):

* `&` is a reference operator. This always get the address of the variable it's referencing.
** Getting the reference or address of a variable is useful when you want to:
*** **Pass-by-reference**: When subsequent operations _dereference_ the reference to get or manipulate the value stored at that memory address. But in order for a reference to be "used", it _must_ be dereferenced by the function using it. For example:
+
[source, go]
----
package main

import "fmt"

func main(){
    p := "this is a string"
    dereferencer(&p)
}

// dereferencer prints value of p to stdout
func dereferencer(input *string){
    fmt.Println(*input) // this resolves to *(&p)
}
----
* When attempting to retrieve or call members of a pointer, you have to put the pointer in parenthesis because of the order of resolution.
** ``*p.member`` resolves to ``*(p.member)``
** ``(*p).member`` resolves to ... well, ``(*p).member``
* The `*` operator can be used as both a **dereferencing** operator, and as an operator used to **assign** a pointer variable. (still not sure what this means tho)

More:

- Bill Kennedy's article on pointers in Go: https://www.ardanlabs.com/blog/2014/12/using-pointers-in-go.html

=== YAML woes

Never liked YAML as a format, because it uses whitespace as a delimiter, and lets vendors do weird stuff like this:

[source, docker-compose]
----
# Example docker-compose.yml section from https://gist.github.com/usmansaleem/bb47064f406c105fdfa69716544b7b8e

environment:
    SERVER_NAME: "myserver.doma.in" 
    # Dummy key, cert
    SSL_KEY: |-
        -----BEGIN RSA PRIVATE KEY-----
        MIICXQIBAAKBgQD272jYrLm8Ph5QpMWFcWUO9Ua1EviykalP+tkMIg12yZ3GvezF
        y8aayxdztB5vu68jqMeg6mOJlscWqFUhmAxj4mDknYenVzVX2CKzCgHlGninTKxY
        61rXDaDZVpSZ+XIESJkaB0z9HHYtrSLr0coKmq4cT5TRptOnkpDlJxIRaQIDAQAB
        AoGATcTYoGTFmiN2KK+8BWrRCQT2X9C5woNdb3LxKIEQ/HhC2HS4PRMQWW/c0vPH
        IilZ30EoneUztAFochpRtWLNg4lJoLy04X/eNjEiC/imp0KSwWXmnuLhDcWcb0+M
        slddvzHAAfK1jzIk8zEvcFnhuRoR/L3yWLQp3dIkG07h5IECQQD7xdyhfYMKiYZ7
        HIq9mU0oNaC7UvxHTw3HB4rT3yvqVZXW15JvR64qCe+sOn9xJEesGDkUUxghV+dd
        0GFOODPb2trQ1NGyKzus72JvO61pVpIhT6kVQo3xC543/+1FvU+albjtmqKe1MjZ
        32B6VtNdlgA4VzMC7qrZXwU+oD83WbG6s1GKQa/rXB8wo9moOGcNPP7PmXovDr6F
        zIVbekIj0YuTQdo31aKPNmrTVqd+iOk0LGaUC5zMi0OgDaKKDuP1Ou6ANVTcBXcF
        BnJRQ7XYtjs0oSmvA7bgbTfN4IMJxJ4hYybF1pURh/o4QW4FUytLaF8zghuTc0aP
        yKIsFLzi5ZT34KLVNGAEA44FsG71hOajFkA4c2I/SwU+
        -----END RSA PRIVATE KEY-----
----

where the pipe (`|`) character is used to start a multiline environment variable, which
then **becomes** an environment variable that can **only** be defined in a `docker-compose.yml`
file, and not in a standard `.env` file.

This becomes especially infuriating because in the above case, we'll want to store the `docker-compose.yml`
file without, in the example above, the RSA private key. That's kind of the point of `.env`
files — to allow you to store secrets securely (albeit secure insofar as the local system is secure)
and locally.

But that's all just brain vomit.
Martin Tournoij/link:https://arp242.net[arp242]'s article better articulates my frustrations with the format/language:

Martin Tournoij/arp242, "YAML: probably not so great after all", updated 15 Apr 2019 on arp242.net. Available: https://arp242.net/yaml-config.html

Summary:

* Insecure/unsafe by default, esp. re: default implementations by languages
* Difficult to parse because of its strict indentation format. Python is comparatively readable because you can delimit blocks with extra `\n`s, whereas yaml tends to come in a single large chunk.
* Complex (? can't speak to this; Martin is writing re: specs)
* Surprising behaviour. The example brought up by Martin is more of a dynamic-typed language issue i.e. `013: Tilburg` is parsed as `11: 'Tilburg'` because `013` is interpreted as an octal number. Most of the 'surprising' behaviour I've encountered are usually related to me expecting whitespace to be parsed one way, and yaml behaving in another.
* Not portable. Basically, the yaml spec tries to dictate implementations that are not practical for mainstream languages, and to me, don't make sense re: language conventions. It's also one of my main complaints: yaml just tries to do lots of weird stuff that becomes uneccessarily complex.

== Text

A quote about reading that I found via BooksActually's Facebook 
page in 19 Aug 2014. Close to my heart, because I've got major 
problems completing books precisely because of this (and also why this
link:https://github.com/zeddee/reading-list[reading-list] exists).

[quote, Italo Calvino, If On A Winter's Night A Traveller]
Don't be amazed if you see my eyes always wandering. In fact, this is my way of reading, and it is only in this way that reading proves fruitful to me. If a book truly interests me, I cannot follow it for more than a few lines before my mind, having seized on a thought that the text suggests to it, or a feeling, or a question, or an image, goes off on a tangent and springs from thought to thought, from image to image, in an itinerary of reasonings and fantasies that I feel the need to pursue to the end, moving away from the book until I have lost sight of it. The stimulus of reading is indispensable to me, and of meaty reading, even if, of every book, I manage to read no more than a few pages. But those few pages already enclose for me whole universes, which I can never exhaust.
